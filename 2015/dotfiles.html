<!DOCTYPE html>
<html lang="da">
<head>
 <meta charset="utf-8">
 <title>Dotfiles
 | logiskhave</title>
 <meta name="description" content="Log ajourf&oslash;rt af Kresten Jacobsen.">
 <meta name="viewport" content="width=720">
 <link rel="icon" href="/static/favicon.ico">
 <link rel="apple-touch-icon" href="/static/apple-touch-icon.jpg"/>
 <link rel="stylesheet" href="/css/theme.css" type="text/css">
 <link rel="alternate" type="application/rss+xml" title="" href="/rss.xml">
</head>
<body>
    <div id="container">
        <div id="header">
            <h1><span>Jeg er</span> <a title="Kolofon" href="/colophon.html">Kresten Jacobsen.</a> <span>Dette er</span> <a title="Log" href="/"> min log.</a></h1>
        </div><!-- /header --><div class="post">
		<p class="date">02. December, 2015</p>
    	<h2>
            
                Dotfiles

            
        </h2>
       	<p><strong><a href="http://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn't_read">TL;DR</a></strong> -- Dotfiler er (næsten) uundværlige i opsætningen af Mac - eller Linux - hvis man vil lidt ud over hvad der lige rummes i Systemindstillinger. Det her er mine dotfiler.</p>
<p><img alt="MacBook Pro" src="https://log.logiskhave.dk/static/20151202_macbook-pro.jpg" /></p>
<h3>Om dotfiler generelt</h3>
<p>Hvis man en gang i mellem reinstallerer sin computer eller har flere maskiner, som man veksler i mellem og godt kan lide at den opfører sig på (nogenlunde) samme måde uanset hvilken man sidder ved eller om man lige har reinstalleret, så er dotfiles smarte.</p>
<p>Kort beskrevet, så er dotfiles en måde at beskrive hvordan en computer skal sættes op på i et meget robust format<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup>.</p>
<p>Filerne bliver læst på forskellige tidspunkter alt efter hvilken fil der er tale om, og jeg har endnu ikke fundet en bedre beskrivelse af det end denne på "<a href="https://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/">The Lumber Room</a>"<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup>.</p>
<p>Problemet med at beskrive hvornår hvad læses er, at Bash trækker på forskellige filer alt efter hvilken slags shell den mener den kører i. Eks.: for en "interaktiv ikke-login-shell", læses .bashrc, men for en "interaktiv login-shell" læser den udelukkende fra den første af .bash_profile, .bash_login og .profile. Der er ingen fornuftig grund til, at det er sådan, sådan er det bare...</p>
<p>Bash læser dotfilerne således (læs nedad i den relevante kolonne. Først udføres A, så B, så C osv. B1, B2, B3 betyder at bash kun udfører den første af disse filer, den støder på):</p>
<div class="codehilite"><pre><span></span>+----------------+-----------+-----------+-------+
|                |Interactive|Interactive|Script*|
|                |login      |non-login  |       |
+----------------+-----------+-----------+-------+
|/etc/profile    |   A       |           |       |
+----------------+-----------+-----------+-------+
|/etc/bash.bashrc|           |    A      |       |
+----------------+-----------+-----------+-------+
|~/.bashrc       |           |    B      |       |
+----------------+-----------+-----------+-------+
|~/.bash_profile |   B1      |           |       |
+----------------+-----------+-----------+-------+
|~/.bash_login   |   B2      |           |       |
+----------------+-----------+-----------+-------+
|~/.profile      |   B3      |           |       |
+----------------+-----------+-----------+-------+
|BASH_ENV        |           |           |  A    |
+----------------+-----------+-----------+-------+
|                |           |           |       |
+----------------+-----------+-----------+-------+
|                |           |           |       |
+----------------+-----------+-----------+-------+
|~/.bash_logout  |    C      |           |       |
+----------------+-----------+-----------+-------+

* Or non-interactive non-login.
</pre></div>


<p>På en Mac afvikles en ny terminal et interaktivt login; på en linux-boks som et interaktivt non-login. Hvorfor det er sådan må Apple kunne svare på<sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup>. Det betyder også at på min Mac, bliver først ~/.bash_profile kørt og ved logud (altså, når Terminalen lukkes) bliver så ~/.bash_logout eksekveret af systemet, resten af filerne (.bash_aliases, .bash_prompt og .osx) bliver så sourcet fra disse eller kørt manuelt.</p>
<h3>Filerne</h3>
<p>~/.bash_profile - køres af køres af operativsystemet</p>
<div class="codehilite"><pre><span></span><span class="c1"># .bash_profile</span>
<span class="c1"># Executed for login bash shells</span>

<span class="c1"># Add `~/bin` to the `$PATH`</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1"># don&#39;t put duplicate lines or lines starting with space in the history.</span>
<span class="c1"># See bash(1) for more options</span>
<span class="nv">HISTCONTROL</span><span class="o">=</span>ignoreboth

<span class="c1"># append to the history file, don&#39;t overwrite it</span>
<span class="nb">shopt</span> -s histappend

<span class="c1"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span>
<span class="nv">HISTSIZE</span><span class="o">=</span><span class="m">1000</span>
<span class="nv">HISTFILESIZE</span><span class="o">=</span><span class="m">2000</span>

<span class="c1"># Load the shell dotfiles, and then some:</span>
<span class="c1"># * ~/.path can be used to extend `$PATH`.</span>
<span class="c1"># * ~/.extra can be used for other settings you don’t want to commit.</span>
<span class="k">for</span> file in ~/.<span class="o">{</span>bash_prompt,bash_aliases<span class="o">}</span><span class="p">;</span> <span class="k">do</span>
    <span class="o">[</span> -r <span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> -f <span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">done</span><span class="p">;</span>
<span class="nb">unset</span> file<span class="p">;</span>

<span class="c1"># Enable bash completion</span>
<span class="k">if</span> <span class="o">[</span> -f <span class="k">$(</span>brew --prefix<span class="k">)</span>/etc/bash_completion <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    . <span class="k">$(</span>brew --prefix<span class="k">)</span>/etc/bash_completion
<span class="k">fi</span>

<span class="c1"># Add tab completion for SSH hostnames based on ~/.ssh/config, ignoring wildcards</span>
<span class="o">[</span> -e <span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.ssh/config&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">complete</span> -o <span class="s2">&quot;default&quot;</span> -o <span class="s2">&quot;nospace&quot;</span> -W <span class="s2">&quot;</span><span class="k">$(</span>grep <span class="s2">&quot;^Host&quot;</span> ~/.ssh/config <span class="p">|</span> grep -v <span class="s2">&quot;[?*]&quot;</span> <span class="p">|</span> cut -d <span class="s2">&quot; &quot;</span> -f2- <span class="p">|</span> tr <span class="s1">&#39; &#39;</span> <span class="s1">&#39;\n&#39;</span><span class="k">)</span><span class="s2">&quot;</span> scp sftp ssh<span class="p">;</span>
</pre></div>


<p>~/.bash_aliases - køres fra ~/.bash_profile</p>
<div class="codehilite"><pre><span></span><span class="c1"># .bash_aliases</span>
<span class="c1"># Sourced by .bash_profile</span>

<span class="c1"># Easier navigation</span>
<span class="nb">alias</span> ~<span class="o">=</span><span class="s2">&quot;cd ~&quot;</span> <span class="c1"># Home</span>
<span class="nb">alias</span> -- -<span class="o">=</span><span class="s2">&quot;cd -&quot;</span> <span class="c1"># Last used dir</span>

<span class="c1"># Always start vmware horizon view in detached state directing standard out to /dev/null</span>
<span class="nb">alias</span> vmware-view<span class="o">=</span><span class="s2">&quot;vmware-view &lt;/dev/null &amp;&gt;/dev/null &amp;&quot;</span>
<span class="c1"># v for vmware-view</span>
<span class="nb">alias</span> <span class="nv">v</span><span class="o">=</span><span class="s2">&quot;vmware-view&quot;</span>

<span class="c1"># Source virtualenv</span>
<span class="nb">alias</span> <span class="nv">venv</span><span class="o">=</span><span class="s2">&quot;source ./venv/bin/activate&quot;</span>

<span class="c1"># Weeknumber</span>
<span class="nb">alias</span> <span class="nv">week</span><span class="o">=</span><span class="s1">&#39;date +%V&#39;</span>

<span class="c1"># Get OS X Software Updates, and Homebrew, and their installed packages</span>
<span class="nb">alias</span> <span class="nv">update</span><span class="o">=</span><span class="s1">&#39;sudo softwareupdate -i -a; brew update; brew upgrade --all; brew cleanup&#39;</span>

<span class="c1"># Show/hide hidden files in Finder</span>
<span class="nb">alias</span> <span class="nv">show</span><span class="o">=</span><span class="s2">&quot;defaults write com.apple.finder AppleShowAllFiles -bool true &amp;&amp; killall Finder&quot;</span>
<span class="nb">alias</span> <span class="nv">hide</span><span class="o">=</span><span class="s2">&quot;defaults write com.apple.finder AppleShowAllFiles -bool false &amp;&amp; killall Finder&quot;</span>

<span class="c1"># Detect which `ls` flavor is in use</span>
<span class="k">if</span> ls --color &gt; /dev/null <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span> <span class="k">then</span> <span class="c1"># GNU `ls`</span>
    <span class="nv">colorflag</span><span class="o">=</span><span class="s2">&quot;--color&quot;</span>
<span class="k">else</span> <span class="c1"># OS X `ls`</span>
    <span class="nv">colorflag</span><span class="o">=</span><span class="s2">&quot;-G&quot;</span>
<span class="k">fi</span>

<span class="c1"># List all files colorized in long format</span>
<span class="nb">alias</span> <span class="nv">ll</span><span class="o">=</span><span class="s2">&quot;ls -lF </span><span class="si">${</span><span class="nv">colorflag</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># List all files colorized in long format, including dot files</span>
<span class="nb">alias</span> <span class="nv">la</span><span class="o">=</span><span class="s2">&quot;ls -laF </span><span class="si">${</span><span class="nv">colorflag</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># List only directories</span>
<span class="nb">alias</span> <span class="nv">lsd</span><span class="o">=</span><span class="s2">&quot;ls -lF </span><span class="si">${</span><span class="nv">colorflag</span><span class="si">}</span><span class="s2"> | grep --color=never &#39;^d&#39;&quot;</span>

<span class="c1"># Always use color output for `ls`</span>
<span class="nb">alias</span> <span class="nv">ls</span><span class="o">=</span><span class="s2">&quot;command ls </span><span class="si">${</span><span class="nv">colorflag</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">export</span> <span class="nv">LS_COLORS</span><span class="o">=</span><span class="s1">&#39;no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.ogg=01;35:*.mp3=01;35:*.wav=01;35:&#39;</span>
</pre></div>


<p>~/.bash_prompt - køres fra ~/.bash_profile</p>
<div class="codehilite"><pre><span></span><span class="c1"># .bash_profile</span>
<span class="c1"># Sourced by .bash_profile</span>

<span class="c1"># Shell prompt based on the Solarized Dark theme.</span>
<span class="c1"># More or less by Mathias Bynens. Heavily inspired by @necolas’s prompt: https://github.com/necolas/dotfiles</span>
<span class="c1"># iTerm → Profiles → Text → use 13pt Monaco with 1.1 vertical spacing.</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$COLORTERM</span> <span class="o">=</span> gnome-* <span class="o">&amp;&amp;</span> <span class="nv">$TERM</span> <span class="o">=</span> xterm <span class="o">]]</span> <span class="o">&amp;&amp;</span> infocmp gnome-256color &gt;/dev/null <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">export</span> <span class="nv">TERM</span><span class="o">=</span><span class="s1">&#39;gnome-256color&#39;</span><span class="p">;</span>
<span class="k">elif</span> infocmp xterm-256color &gt;/dev/null <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">export</span> <span class="nv">TERM</span><span class="o">=</span><span class="s1">&#39;xterm-256color&#39;</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

prompt_git<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local</span> <span class="nv">s</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nb">local</span> <span class="nv">branchName</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>

    <span class="c1"># Check if the current directory is in a Git repository.</span>
    <span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>git rev-parse --is-inside-work-tree <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="si">${</span><span class="p">?</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>

        <span class="c1"># check if the current directory is in .git before running git checks</span>
        <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="k">$(</span>git rev-parse --is-inside-git-dir <span class="m">2</span>&gt; /dev/null<span class="k">)</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>

            <span class="c1"># Ensure the index is up to date.</span>
            git update-index --really-refresh -q <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span>

            <span class="c1"># Check for uncommitted changes in the index.</span>
            <span class="k">if</span> ! <span class="k">$(</span>git diff --quiet --ignore-submodules --cached<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">s</span><span class="o">+=</span><span class="s1">&#39;+&#39;</span><span class="p">;</span>
            <span class="k">fi</span><span class="p">;</span>

            <span class="c1"># Check for unstaged changes.</span>
            <span class="k">if</span> ! <span class="k">$(</span>git diff-files --quiet --ignore-submodules --<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">s</span><span class="o">+=</span><span class="s1">&#39;!&#39;</span><span class="p">;</span>
            <span class="k">fi</span><span class="p">;</span>

            <span class="c1"># Check for untracked files.</span>
            <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;</span><span class="k">$(</span>git ls-files --others --exclude-standard<span class="k">)</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">s</span><span class="o">+=</span><span class="s1">&#39;?&#39;</span><span class="p">;</span>
            <span class="k">fi</span><span class="p">;</span>

            <span class="c1"># Check for stashed files.</span>
            <span class="k">if</span> <span class="k">$(</span>git rev-parse --verify refs/stash <span class="p">&amp;</span>&gt;/dev/null<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">s</span><span class="o">+=</span><span class="s1">&#39;$&#39;</span><span class="p">;</span>
            <span class="k">fi</span><span class="p">;</span>

        <span class="k">fi</span><span class="p">;</span>

        <span class="c1"># Get the short symbolic ref.</span>
        <span class="c1"># If HEAD isn’t a symbolic ref, get the short SHA for the latest commit</span>
        <span class="c1"># Otherwise, just give up.</span>
        <span class="nv">branchName</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>git symbolic-ref --quiet --short HEAD <span class="m">2</span>&gt; /dev/null <span class="o">||</span> <span class="se">\</span>
            git rev-parse --short HEAD <span class="m">2</span>&gt; /dev/null <span class="o">||</span> <span class="se">\</span>
            <span class="nb">echo</span> <span class="s1">&#39;(unknown)&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="p">;</span>

        <span class="o">[</span> -n <span class="s2">&quot;</span><span class="si">${</span><span class="nv">s</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nv">s</span><span class="o">=</span><span class="s2">&quot; [</span><span class="si">${</span><span class="nv">s</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">;</span>

        <span class="nb">echo</span> -e <span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="si">}${</span><span class="nv">branchName</span><span class="si">}${</span><span class="nv">blue</span><span class="si">}${</span><span class="nv">s</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="k">fi</span><span class="p">;</span>
<span class="o">}</span>

<span class="k">if</span> tput setaf <span class="m">1</span> <span class="p">&amp;</span>&gt; /dev/null<span class="p">;</span> <span class="k">then</span>
    tput sgr0<span class="p">;</span> <span class="c1"># reset colors</span>
    <span class="nv">bold</span><span class="o">=</span><span class="k">$(</span>tput bold<span class="k">)</span><span class="p">;</span>
    <span class="nv">reset</span><span class="o">=</span><span class="k">$(</span>tput sgr0<span class="k">)</span><span class="p">;</span>
    <span class="c1"># Solarized colors, taken from http://git.io/solarized-colors.</span>
    <span class="nv">black</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">0</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">blue</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">33</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">cyan</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">37</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">green</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">64</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">orange</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">166</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">purple</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">125</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">red</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">124</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">violet</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">61</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">white</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">15</span><span class="k">)</span><span class="p">;</span>
    <span class="nv">yellow</span><span class="o">=</span><span class="k">$(</span>tput setaf <span class="m">136</span><span class="k">)</span><span class="p">;</span>
<span class="k">else</span>
    <span class="nv">bold</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nv">reset</span><span class="o">=</span><span class="s2">&quot;\e[0m&quot;</span><span class="p">;</span>
    <span class="nv">black</span><span class="o">=</span><span class="s2">&quot;\e[1;30m&quot;</span><span class="p">;</span>
    <span class="nv">blue</span><span class="o">=</span><span class="s2">&quot;\e[1;34m&quot;</span><span class="p">;</span>
    <span class="nv">cyan</span><span class="o">=</span><span class="s2">&quot;\e[1;36m&quot;</span><span class="p">;</span>
    <span class="nv">green</span><span class="o">=</span><span class="s2">&quot;\e[1;32m&quot;</span><span class="p">;</span>
    <span class="nv">orange</span><span class="o">=</span><span class="s2">&quot;\e[1;33m&quot;</span><span class="p">;</span>
    <span class="nv">purple</span><span class="o">=</span><span class="s2">&quot;\e[1;35m&quot;</span><span class="p">;</span>
    <span class="nv">red</span><span class="o">=</span><span class="s2">&quot;\e[1;31m&quot;</span><span class="p">;</span>
    <span class="nv">violet</span><span class="o">=</span><span class="s2">&quot;\e[1;35m&quot;</span><span class="p">;</span>
    <span class="nv">white</span><span class="o">=</span><span class="s2">&quot;\e[1;37m&quot;</span><span class="p">;</span>
    <span class="nv">yellow</span><span class="o">=</span><span class="s2">&quot;\e[1;33m&quot;</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="c1"># Highlight the user name when logged in as root.</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;root&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">userStyle</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">red</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">else</span>
    <span class="nv">userStyle</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">orange</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="c1"># Highlight the hostname when connected via SSH.</span>
<span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">SSH_TTY</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">hostStyle</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">bold</span><span class="si">}${</span><span class="nv">red</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">else</span>
    <span class="nv">hostStyle</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">yellow</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">fi</span><span class="p">;</span>

<span class="c1"># Set the terminal title to the current working directory.</span>
<span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;\[\033]0;\w\007\]&quot;</span><span class="p">;</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">bold</span><span class="si">}</span><span class="s2">\]\n&quot;</span><span class="p">;</span> <span class="c1"># newline</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">userStyle</span><span class="si">}</span><span class="s2">\]\u&quot;</span><span class="p">;</span> <span class="c1"># username</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">white</span><span class="si">}</span><span class="s2">\] @ &quot;</span><span class="p">;</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">hostStyle</span><span class="si">}</span><span class="s2">\]\h&quot;</span><span class="p">;</span> <span class="c1"># host</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">white</span><span class="si">}</span><span class="s2">\] in &quot;</span><span class="p">;</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">green</span><span class="si">}</span><span class="s2">\]\w&quot;</span><span class="p">;</span> <span class="c1"># working directory</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\$(prompt_git \&quot;</span><span class="si">${</span><span class="nv">white</span><span class="si">}</span><span class="s2"> on </span><span class="si">${</span><span class="nv">violet</span><span class="si">}</span><span class="s2">\&quot;)&quot;</span><span class="p">;</span> <span class="c1"># Git repository details</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\n&quot;</span><span class="p">;</span>
<span class="nv">PS1</span><span class="o">+=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">white</span><span class="si">}</span><span class="s2">\]\$ \[</span><span class="si">${</span><span class="nv">reset</span><span class="si">}</span><span class="s2">\]&quot;</span><span class="p">;</span> <span class="c1"># `$` (and reset color)</span>
<span class="nb">export</span> PS1<span class="p">;</span>

<span class="nv">PS2</span><span class="o">=</span><span class="s2">&quot;\[</span><span class="si">${</span><span class="nv">yellow</span><span class="si">}</span><span class="s2">\]→ \[</span><span class="si">${</span><span class="nv">reset</span><span class="si">}</span><span class="s2">\]&quot;</span><span class="p">;</span>
<span class="nb">export</span> PS2<span class="p">;</span>
</pre></div>


<p>~/.bash_logout - køres af køres af operativsystemet</p>
<div class="codehilite"><pre><span></span><span class="c1"># .bash_logout</span>
<span class="c1"># Executed after logout of bash shells</span>

clear
</pre></div>


<p>~/.osx - håndkøres ved opsætning af ny Mac</p>
<div class="codehilite"><pre><span></span><span class="c1"># .osx</span>
<span class="c1"># Highly opinionated OS X specific configuration</span>

<span class="c1">###############################################################################</span>
<span class="c1"># Installing apps                                                             #</span>
<span class="c1">###############################################################################</span>

<span class="c1"># Install Xcode cli-tools</span>
xcode-select --install

<span class="c1"># Install Brew (http://brew.sh)</span>
ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&quot;</span>

<span class="c1"># Install Caskroom (http://caskroom.io)</span>
brew install caskroom/cask/brew-cask

<span class="c1"># Install REAL python (including pip etc.)</span>
brew install python

<span class="c1"># Install missing unix components</span>
brew install ssh-copy-id
brew install bash-completion

<span class="c1"># Install apps</span>
brew cask install hazel
brew cask install 1password
brew cask install textwrangler
brew cask install dropbox
brew cask install google-chrome
brew cask install transmit
brew cask install little-snitch


<span class="c1">###############################################################################</span>
<span class="c1"># Global settings / UI                                                        #</span>
<span class="c1">###############################################################################</span>

<span class="c1"># Tap-to-click (logout and back in to activate):</span>
defaults -currentHost write -globalDomain com.apple.mouse.tapBehavior -int <span class="m">1</span>

<span class="c1"># Set highlight color to green</span>
defaults write NSGlobalDomain AppleHighlightColor -string <span class="s2">&quot;0.764700 0.976500 0.568600&quot;</span>

<span class="c1"># Hot corners</span>
<span class="c1"># Possible values:</span>
<span class="c1">#  0: no-op</span>
<span class="c1">#  2: Mission Control</span>
<span class="c1">#  3: Show application windows</span>
<span class="c1">#  4: Desktop</span>
<span class="c1">#  5: Start screen saver</span>
<span class="c1">#  6: Disable screen saver</span>
<span class="c1">#  7: Dashboard</span>
<span class="c1"># 10: Put display to sleep</span>
<span class="c1"># 11: Launchpad</span>
<span class="c1"># 12: Notification Center</span>
<span class="c1"># Top left screen corner → Put display to sleep</span>
defaults write com.apple.dock wvous-tl-corner -int <span class="m">10</span>
defaults write com.apple.dock wvous-tl-modifier -int <span class="m">0</span>
<span class="c1"># Top right screen corner → Desktop</span>
defaults write com.apple.dock wvous-tr-corner -int <span class="m">4</span>
defaults write com.apple.dock wvous-tr-modifier -int <span class="m">0</span>
<span class="c1"># Bottom left screen corner → Show application windows</span>
defaults write com.apple.dock wvous-bl-corner -int <span class="m">3</span>
defaults write com.apple.dock wvous-bl-modifier -int <span class="m">0</span>
<span class="c1"># Bottom right screen corner → Mission Control</span>
defaults write com.apple.dock wvous-br-corner -int <span class="m">2</span>
defaults write com.apple.dock wvous-br-modifier -int <span class="m">0</span>


<span class="c1">###############################################################################</span>
<span class="c1"># Safari &amp; WebKit                                                             #</span>
<span class="c1">###############################################################################</span>

<span class="c1"># Privacy: don’t send search queries to Apple</span>
defaults write com.apple.Safari UniversalSearchEnabled -bool <span class="nb">false</span>
defaults write com.apple.Safari SuppressSearchSuggestions -bool <span class="nb">true</span>

<span class="c1"># Show the full URL in the address bar (note: this still hides the scheme)</span>
defaults write com.apple.Safari ShowFullURLInSmartSearchField -bool <span class="nb">true</span>

<span class="c1"># Prevent Safari from opening ‘safe’ files automatically after downloading</span>
defaults write com.apple.Safari AutoOpenSafeDownloads -bool <span class="nb">false</span>

<span class="c1"># Hide Safari’s bookmarks bar by default</span>
defaults write com.apple.Safari ShowFavoritesBar -bool <span class="nb">false</span>

<span class="c1"># Hide Safari’s sidebar in Top Sites</span>
defaults write com.apple.Safari ShowSidebarInTopSites -bool <span class="nb">false</span>
</pre></div>


<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Ren tekst, som kan læses på en hvilken som helst computer lavet siden 70'erne. I øvrigt samme format, som denne blog bliver skrevet i.&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Hvorfra nedenstående tabel da også er tyvstjålet.&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Da det - som sædvanen byder - er dem, der afviger fra standarden. <em>suk</em>&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
    </div>
	<div class="navleft">
		<a rel="prev prefetch" href="/archive.html">&lsaquo;&nbsp; Til arkivet</a>
	</div>

        <div id="footer">
            <p>Kresten Jacobsen @ logiskhave</p><p>Udgivet under <a href="//log.logiskhave.dk/static/solipsistisk_licens.html">Solipsistisk Offentlig Licens</a></p>
        </div><!-- /footer -->
    </div><!-- /container -->
</body>
</html>