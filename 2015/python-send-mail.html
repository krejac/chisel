<!DOCTYPE html>
<html lang="da">
<head>
 <meta charset="utf-8">
 <title>Python: Send mail
 | logiskhave</title>
 <meta name="description" content="Log ajourf&oslash;rt af Kresten Jacobsen.">
 <meta name="viewport" content="width=720">
 <link rel="icon" href="http://static.logiskhave.dk/favicon.ico">
 <link rel="apple-touch-icon" href="http://static.logiskhave.dk/apple-touch-icon.jpg"/>
 <link rel="stylesheet" href="/css/theme.css" type="text/css">
 <link rel="alternate" type="application/rss+xml" title="" href="/rss.xml">
</head>
<body>
    <div id="container">
        <div id="header">
            <h1><span>Jeg er</span> <a title="Kolofon" href="/colophon.html">Kresten Jacobsen.</a> <span>Dette er</span> <a title="Log" href="/"> min log.</a></h1>
        </div><!-- /header --><div class="post">
		<p class="date">24. November, 2015</p>
    	<h2>
            
                Python: Send mail

            
        </h2>
       	<p><img alt="Code..." src="http://static.logiskhave.dk/20141023_code.jpg" title="Code..." /></p>
<p>Nedenstående eksempel sender en email til 'user2@example.org' med en påmindelse om at medbringe en paraply (det kunne jo være en del af et script, der tjekkede sandsynligheden for regn. Ja, det skal jeg også have lavet...).</p>
<pre class="codehilite"><code class="language-python">import smtplib

# Credentials
GMAIL_USERNAME = 'user1@example.org'
GMAIL_PASSWORD = 'xyz123!'

# Contents (body_of_email can be either plaintext or html)
email_subject = 'Email subject goes here'
recipient = 'user2@example.org'
body_of_email = &quot;&quot;&quot;Dear XXX,&lt;br&gt;
Don't forget to bring an umbrella. It's going to be raining cats and dogs...&lt;br&gt;
&lt;br&gt;
See you soon.&lt;br&gt;
&lt;br&gt;
Sincerly,&lt;br&gt;
UNIVAC
&quot;&quot;&quot;

# Establish secure connection, verify identity (you may have to create an app specific password if you - like me - have two factor authentification enabled).
session = smtplib.SMTP('smtp.gmail.com', 587)
session.starttls()
session.login(GMAIL_USERNAME, GMAIL_PASSWORD)

headers = &quot;\r\n&quot;.join([&quot;from: &quot; + GMAIL_USERNAME,
                       &quot;subject: &quot; + email_subject,
                       &quot;to: &quot; + recipient,
                       &quot;mime-version: 1.0&quot;,
                       &quot;content-type: text/html&quot;])

content = headers + &quot;\r\n\r\n&quot; + body_of_email
session.sendmail(GMAIL_USERNAME, recipient, content)</code></pre>


<p>Og da smtplib er implementeret i <a href="http://omz-software.com/pythonista/">Pythonista</a>, burde ovenstående eksempel virke der også. :)</p>
    </div>
	<div class="navleft">
		<a rel="prev prefetch" href="/archive.html">&lsaquo;&nbsp; Til arkivet</a>
	</div>

        <div id="footer">
            <p>Kresten Jacobsen @ logiskhave</p><p>Udgivet under <a href="http://static.logiskhave.dk/solipsistisk_licens.html">Solipsistisk Offentlig Licens</a></p>
        </div><!-- /footer -->
    </div><!-- /container -->
</body>
</html>