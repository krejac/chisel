<!DOCTYPE html>
<html lang="da">
<head>
 <meta charset="utf-8">
 <title>Python: Send mail | k.jcbsn.dk</title>
 <meta name="description" content="Log ajourf&oslash;rt af Kresten Jacobsen.">
 <meta name="viewport" content="width=720">
 <link rel="icon" href="/static/favicon.ico">
 <link rel="apple-touch-icon" href="/static/apple-touch-icon.jpg"/>
 <link rel="stylesheet" href="/css/theme.css" type="text/css">
 <link rel="alternate" type="application/rss+xml" title="" href="/rss.xml">
</head>
<body>
    <div id="container">
        <div id="header">
            <h1><span>Jeg er</span> <a title="Kolofon" href="/colophon.html">Kresten Jacobsen.</a> <span>Dette er</span> <a title="Log" href="/"> min log.</a></h1>
        </div><!-- /header --><div class="post">
		<p class="date">november 24, 2015</p>
    	<h2>
            
                Python: Send mail
            
        </h2>
       	<p><strong><a href="http://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn't_read">TL;DR</a></strong> - Det er lige gået op for mig, <em>hvor</em> nemt det egentligt er at sende en gmail med Python. Det må jeg lige få noteret...</p>
<p><img alt="Code..." src="/static/20141023_code.jpg" title="Code..." /></p>
<p>Nedenstående eksempel sender en email til 'user2@example.org' med en påmindelse om at medbringe en paraply (det kunne jo være en del af et script, der tjekkede sandsynligheden for regn. Ja, det skal jeg også have lavet...).</p>
<pre><code>:::python
import smtplib

# Credentials
GMAIL_USERNAME = 'user1@example.org'
GMAIL_PASSWORD = 'xyz123!'

# Contents (body_of_email can be either plaintext or html)
email_subject = 'Email subject goes here'
recipient = 'user2@example.org'
body_of_email = """Dear XXX,&lt;br&gt;
Don't forget to bring an umbrella. It's going to be raining cats and dogs...&lt;br&gt;
&lt;br&gt;
See you soon.&lt;br&gt;
&lt;br&gt;
Sincerly,&lt;br&gt;
UNIVAC
"""

# Establish secure connection, verify identity (you may have to create an app specific password if you - like me - have two factor authentification enabled).
session = smtplib.SMTP('smtp.gmail.com', 587)
session.starttls()
session.login(GMAIL_USERNAME, GMAIL_PASSWORD)

headers = "\r\n".join(["from: " + GMAIL_USERNAME,
                       "subject: " + email_subject,
                       "to: " + recipient,
                       "mime-version: 1.0",
                       "content-type: text/html"])

content = headers + "\r\n\r\n" + body_of_email
session.sendmail(GMAIL_USERNAME, recipient, content)
</code></pre>
<p>Og da smtplib er implementeret i <a href="http://omz-software.com/pythonista/">Pythonista</a>, burde ovenstående eksempel virke der også. :)</p>
    </div>
	<div class="navleft">
		<a rel="prev prefetch" href="/archive.html">&lsaquo;&nbsp; Til arkivet</a>
	</div>

        <div id="footer">
            <p>Kresten Jacobsen @ logiskhave</p><p>Udgivet under <a href="/static/solipsistisk_licens.html">Solipsistisk Offentlig Licens</a></p>
        </div><!-- /footer -->
    </div><!-- /container -->
</body>
</html>